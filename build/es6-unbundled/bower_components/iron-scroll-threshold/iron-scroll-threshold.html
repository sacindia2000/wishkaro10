<html><head><link rel="import" href="../polymer/polymer.html"></head><body><dom-module id="iron-scroll-threshold"></dom-module><script>Polymer({is:'iron-scroll-threshold',properties:{scrollTarget:{type:Object,value:null},orient:{type:String,value:'v'},upperThreshold:{type:Number,value:null},lowerThreshold:{type:Number,value:null},upperTriggered:{type:Boolean,value:!1,readOnly:!0,notify:!0},lowerTriggered:{type:Boolean,value:!1,readOnly:!0,notify:!0}},observers:['setup(upperThreshold, lowerThreshold, scrollTarget, orient)'],ready:function(){this._boundScrollHandler=this.checkThreshold.bind(this)},detached:function(){this._scrollTarget&&this._scrollTarget.removeEventListener('scroll',this._boundScrollHandler)},setup:function(){var a=this.scrollTarget||this;this._scrollTarget&&this._scrollTarget!=a&&this._scrollTarget.removeEventListener('scroll',this._boundScrollHandler),a&&this._boundScrollHandler&&(this._scrollTarget=a,this._scrollTarget.addEventListener('scroll',this._boundScrollHandler)),this.style.overflow=a==this?'auto':null,this.scrollPosition='v'==this.orient?'scrollTop':'scrollLeft',this.sizeExtent='v'==this.orient?'offsetHeight':'offsetWidth',this.scrollExtent='v'==this.orient?'scrollHeight':'scrollWidth',this.upperThreshold||this._setUpperTriggered(!1),this.lowerThreshold||this._setLowerTriggered(!1)},checkThreshold:function(){var a=this._scrollTarget[this.scrollPosition];if(!this.upperTriggered&&null!==this.upperThreshold&&a<this.upperThreshold&&((null===this.lowerThreshold||this.lowerTriggered)&&this._scrollTarget.removeEventListener('scroll',this._boundScrollHandler),this._setUpperTriggered(!0),this.fire('upper-trigger')),!this.lowerTriggered&&null!==this.lowerThreshold){var b=a+this._scrollTarget[this.sizeExtent],c=this._scrollTarget[this.scrollExtent];c-b<this.lowerThreshold&&((null===this.upperThreshold||this.upperTriggered)&&this._scrollTarget.removeEventListener('scroll',this._boundScrollHandler),this._setLowerTriggered(!0),this.fire('lower-trigger'))}},clearUpper:function(a){a?this._waitForMutation(function(){this.clearUpper()}.bind(this)):this.async(function(){this._setUpperTriggered(!1),this._scrollTarget.addEventListener('scroll',this._boundScrollHandler)})},clearLower:function(a){a?this._waitForMutation(function(){this.clearLower()}.bind(this)):this.async(function(){this._setLowerTriggered(!1),this._scrollTarget.addEventListener('scroll',this._boundScrollHandler)})},_waitForMutation:function(a){var b=new MutationObserver(function(c){a.call(this,b,c),b.disconnect()}.bind(this));b.observe(this._scrollTarget,{attributes:!0,childList:!0,subtree:!0})}});</script></body></html>